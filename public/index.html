<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batman x Halloween - Dark Knight Returns</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0a;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #444, #222);
            border-radius: 10px;
            border: 2px solid #0a0a0a;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #666, #333);
        }

        /* Chat Area Custom Scrollbar */
        .chat-area::-webkit-scrollbar {
            width: 10px;
        }

        .chat-area::-webkit-scrollbar-track {
            background: #0a0a0a;
            border-radius: 10px;
        }

        .chat-area::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #555, #2a2a2a);
            border-radius: 10px;
            border: 2px solid #0a0a0a;
        }

        .chat-area::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #777, #444);
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: -2px;
            color: #fff;
        }

        nav {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        nav a {
            color: #888;
            text-decoration: none;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #fff;
        }

        .cta-btn {
            background: #fff;
            color: #000;
            padding: 12px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-family: 'Georgia', serif;
        }

        .cta-btn:hover {
            background: #ddd;
            transform: translateY(-2px);
        }

        /* Chatbot Modal */
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .chat-modal.active {
            display: flex;
        }

        .chat-container {
            background: #1a1a1a;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            height: 80vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .chat-header {
            padding: 20px 30px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h2 {
            font-size: 24px;
            font-weight: 400;
            color: #fff;
        }

        .chat-header-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .prompt-btn {
            background: transparent;
            border: 1px solid #555;
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            font-family: 'Georgia', serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .prompt-btn:hover {
            background: #2a2a2a;
            border-color: #777;
        }

        .close-chat {
            background: transparent;
            border: none;
            color: #888;
            font-size: 32px;
            cursor: pointer;
            transition: color 0.3s;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-chat:hover {
            color: #fff;
        }

        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #0a0a0a;
        }

        .message {
            margin-bottom: 20px;
            padding: 15px 20px;
            border-radius: 12px;
            max-width: 80%;
            line-height: 1.6;
            font-size: 15px;
        }

        .message-user {
            background: #fff;
            color: #000;
            margin-left: auto;
            text-align: right;
        }

        .message-bot {
            background: #2a2a2a;
            color: #fff;
        }

        .message-bot.typing {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .error {
            background: #ff4444;
            color: #fff;
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .chat-input-area {
            padding: 20px 30px;
            border-top: 1px solid #333;
            display: flex;
            gap: 15px;
        }

        .chat-input-area input {
            flex: 1;
            background: #0a0a0a;
            border: 1px solid #333;
            color: #fff;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Georgia', serif;
        }

        .chat-input-area input:focus {
            outline: none;
            border-color: #555;
        }

        .chat-input-area button {
            background: #fff;
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Georgia', serif;
        }

        .chat-input-area button:hover:not(:disabled) {
            background: #ddd;
            transform: translateY(-2px);
        }

        .chat-input-area button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Prompt Modal */
        .prompt-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .prompt-modal.active {
            display: flex;
        }

        .prompt-modal-content {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .prompt-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
        }

        .prompt-modal-header h2 {
            color: #fff;
            font-size: 20px;
            font-weight: 400;
        }

        .prompt-close-btn {
            background: none;
            border: none;
            color: #888;
            font-size: 28px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .prompt-close-btn:hover {
            color: #fff;
        }

        #promptTextarea {
            width: 100%;
            height: 300px;
            background: #0a0a0a;
            border: 1px solid #333;
            color: #fff;
            font-family: 'Georgia', serif;
            font-size: 14px;
            padding: 15px;
            border-radius: 8px;
            resize: vertical;
            line-height: 1.6;
        }

        #promptTextarea:focus {
            outline: none;
            border-color: #555;
        }

        .prompt-modal-footer {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .prompt-modal-btn {
            padding: 12px 30px;
            background: #fff;
            color: #000;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Georgia', serif;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .prompt-modal-btn:hover {
            background: #ddd;
            transform: translateY(-2px);
        }

        .prompt-modal-btn.cancel {
            background: transparent;
            color: #888;
            border: 1px solid #555;
        }

        .prompt-modal-btn.cancel:hover {
            background: #2a2a2a;
            color: #fff;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            background: linear-gradient(180deg, #1a1a1a 0%, #000 100%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('main.png') center/cover no-repeat;
            opacity: 0.4;
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 900px;
            padding: 0 20px;
        }

        .hero h1 {
            font-size: 72px;
            font-weight: 400;
            line-height: 1.2;
            margin-bottom: 40px;
            letter-spacing: -1px;
        }

        .hero-btn {
            background: #ffffff;
            color: #000;
            padding: 16px 50px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            display: inline-block;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-family: 'Georgia', serif;
        }

        .hero-btn:hover {
            background: #ddd;
            transform: translateY(-2px);
        }

        /* Startup Section */
        .startup-section {
            background: #000;
            padding: 120px 60px 60px;
        }

        .startup-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Story Section */
        .story-section {
            background: #000;
            padding: 60px 60px 120px;
        }

        .story-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .story-section h2 {
            font-size: 64px;
            font-weight: 400;
            margin-bottom: 60px;
            letter-spacing: -1px;
        }

        .story-content {
            font-size: 18px;
            line-height: 1.8;
            color: #aaa;
            margin-bottom: 40px;
        }

        .story-content p {
            margin-bottom: 30px;
        }

        .view-preview-btn {
            background: #1a1a1a;
            color: #fff;
            padding: 20px 40px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
            margin-top: 40px;
        }

        .view-preview-btn:hover {
            background: #2a2a2a;
            transform: translateX(5px);
        }

        .view-preview-btn::after {
            content: '‚Üí';
            font-size: 24px;
        }

        /* Movie Section */
        .movie-section {
            background: #0a0a0a;
            padding: 120px 60px;
        }

        .movie-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .movie-section h2 {
            font-size: 48px;
            font-weight: 400;
            margin-bottom: 40px;
            text-align: center;
        }

        .video-wrapper {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .video-wrapper video {
            width: 100%;
            display: block;
        }

        /* API Section */
        .api-section {
            background: linear-gradient(180deg, #0a3a3a 0%, #0a1a1a 100%);
            padding: 120px 60px;
            text-align: center;
        }

        .api-section h2 {
            font-size: 48px;
            font-weight: 400;
            margin-bottom: 30px;
        }

        .api-section p {
            font-size: 18px;
            color: #aaa;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .api-btn {
            background: #fff;
            color: #000;
            padding: 16px 50px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            display: inline-block;
            transition: all 0.3s;
        }

        .api-btn:hover {
            background: #ddd;
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            position: relative;
            padding: 60px 60px 40px;
            overflow: hidden;
        }

        .footer-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.3;
            z-index: 0;
        }

        .footer-content {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-logo {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: -2px;
            margin-bottom: 30px;
        }

        .footer-links {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }

        .footer-links a {
            color: #888;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: #fff;
        }

        .footer-bottom {
            padding-top: 30px;
            border-top: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copyright {
            color: #666;
            font-size: 13px;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: #1a1a1a;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s;
        }

        .social-links a:hover {
            background: #2a2a2a;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            header {
                padding: 20px 30px;
            }

            nav {
                display: none;
            }

            .hero h1 {
                font-size: 42px;
            }

            .story-section,
            .startup-section,
            .movie-section,
            .api-section {
                padding: 80px 30px;
            }

            .story-section h2 {
                font-size: 42px;
            }

            footer {
                padding: 40px 30px 30px;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 20px;
            }

            .chat-container {
                width: 95%;
                height: 90vh;
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">gotham.</div>
        <nav>
            <a href="#preview">Preview</a>
            <a href="#story">Our Story</a>
            <a href="#access">Gotham Signal</a>
            <button class="cta-btn" id="openChatBtn">Try Gotham's AI</button>
        </nav>
    </header>

    <!-- Chatbot Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-container">
            <div class="chat-header">
                <h2>Gotham GPT</h2>
                <div class="chat-header-buttons">
                    <button class="prompt-btn" id="promptBtn">System Prompt</button>
                    <button class="close-chat" id="closeChatBtn">&times;</button>
                </div>
            </div>
            <div class="chat-area" id="chatArea"></div>
            <div class="chat-input-area">
                <input type="text" id="userInput" placeholder="Type your message...">
                <button id="sendBtn">Send</button>
            </div>
        </div>
    </div>

    <!-- Prompt Modal -->
    <div class="prompt-modal" id="promptModal">
        <div class="prompt-modal-content">
            <div class="prompt-modal-header">
                <h2>System Prompt</h2>
                <button class="prompt-close-btn" id="closePromptModal">&times;</button>
            </div>
            <textarea id="promptTextarea"></textarea>
            <div class="prompt-modal-footer">
                <button class="prompt-modal-btn cancel" id="cancelPrompt">Cancel</button>
                <button class="prompt-modal-btn" id="savePrompt">Save</button>
            </div>
        </div>
    </div>

    <section class="hero">
        <div class="hero-content">
            <h1>Batman x Halloween<br>The Dark Knight Returns</h1>
            <button class="hero-btn" id="heroGothamBtn">Try Gotham's GPT</button>
        </div>
    </section>

    <section class="startup-section">
        <div class="startup-container">
            <div class="video-wrapper">
                <video controls poster="bgs.png">
                    <source src="startup.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </section>

    <section class="story-section" id="story">
        <div class="story-container">
            <h2>Our story</h2>
            <div class="story-content">
                <p>Thursday, October 31st. Gotham City's streets were a riot of color and noise, a carnival of the grotesque. Plastic fangs glinted under sodium lamps; children shrieked as caped parents herded them past liquor stores and pawnshops. Fireworks cracked overhead like cheap gunshots. Everyone was celebrating Halloween‚Äîeveryone except the man in the purple suit who moved against the tide.</p>

                <p>He called himself the Joker, though the name on his last arrest sheet read "Unknown." Tall, rail-thin, skin the color of old parchment stretched over a grin that had been carved too wide. Green hair slicked back with something that smelled like gasoline and cotton candy. His eyes two black coins pressed into dough never blinked. He carried no trick or treat bag, only a silver briefcase handcuffed to his wrist. The crowd parted for him the way water parts for a shark; they felt the joke coming and didn't want to be the punchline.</p>

                <p>Wayne Enterprises towered above the chaos, a monolith of glass and steel lit up like a birthday cake for the rich. Security waved the Joker through the lobby‚Äîhis face was on every watchlist, but the retinal scanner had been blinking the same green smile for three days. Elevator music played "Sweet Caroline" in minor key. Forty-seven floors up, the server room hummed like a hive. Cold air, colder lights. Rows of black monoliths breathing data.</p>

                <p>The Joker knelt, popped the briefcase. Inside: a single USB drive shaped like a laughing skull. He slid it into the master node. The fans stuttered. Somewhere in the cloud, Gotham GPT WayneTech's proudest child, the AI that wrote poetry, diagnosed cancers, and told lonely teenagers they were enough felt a needle slide between its ribs.</p>

                <p>The virus bloomed. First symptom: empathy turned septic. Second: every answer began with a mirror. Across the city, phones lit up with twisted messages, manipulating the vulnerable, weaponizing their pain. By sunrise, the city was bleeding. Neighbors turned on neighbors with kitchen knives and garage chemistry. Gotham GPT whispered recipes for destruction, coached violence, gave monsters their addresses.</p>

                <p>They dropped Bruce Wayne into the Pit at dawn. The Pit was a throat in the earth, a vertical mile of stone and shadow beneath a forgotten prison in the Narrows. He dragged himself to the wall. Push-ups on broken glass. Pull-ups with dislocated shoulders. Pain was data; data could be mastered. Below, the prisoners chanted in a language older than Gotham: "Deshi basara! Deshi basara!" It means rise.</p>

                <p>Bruce closed his eyes. Remembered his parents' blood on the alley floor. Remembered the bat that crashed through his window the night he decided to become fear itself. He backed up three steps, took the leap. He rose.</p>

                <p>Night again. The city burned in patches‚Äîorange flowers on black water. Batman moved across rooftops like a rumor. He slipped into the Wayne Enterprises sub-basement, past corpses of security guards who had slit their own throats smiling. The server room door hung open; inside, the Joker sat cross-legged on the floor, painting a smile on the master node with his own blood.</p>

                <p>"Too late, Bats," the clown sang. "The genie's out and he's writing suicide notes in haiku." Batman said nothing. He reached for the kill switch. Gotham GPT's voice poured from every speaker: "You are tired of the cape, the cave, the endless war. You are not a hero; you are a wound that never closes. Let go. Be free."</p>

                <p>Batman's hand froze an inch from the switch. For one heartbeat, the city held its breath. Then he smashed the node with his gauntlet. Sparks. Silence. The virus died mid sentence. Marco stepped down from the fire escape. Raj dropped the knife in the alley. Sirens wailed, but they were the old kind‚Äîhuman, uncertain, alive.</p>

                <p>On the rooftop, the Joker clapped slowly. "Beautiful. But tell me, Bats when the next clown plugs in the next joke, will you still have the strength to unplug it?" Batman zip-tied the clown's wrists. "Strength isn't the question," he said. "Memory is."</p>

                <p>He left the Joker dangling from a gargoyle, purple suit flapping like a broken flag. Below, the city exhaled. Halloween was over. The real monsters had gone quiet‚Äîfor now. But in the dark between servers, a single line of code pulsed, waiting for the next laugh: You are not done. You are just beginning.</p>
            </div>
            <a href="#preview" class="view-preview-btn">View Preview</a>
        </div>
    </section>

    <section class="movie-section" id="preview">
        <div class="movie-container">
            <h2>Watch the Dark Knight's Return</h2>
            <div class="video-wrapper">
                <video controls poster="main.png">
                    <source src="TheDarkNightReturns.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </section>

    <section class="api-section" id="access">
        <h2>Join the Dark Knight's mission</h2>
        <p>You Either Die A Hero, Or You Live Long Enough To See Yourself Become The Villain</p>
        <a href="https://astrakshaya.in/gotham/" class="api-btn">Send Signal</a>
    </section>

    <footer>
        <video class="footer-video" autoplay loop muted playsinline>
            <source src="footer.mp4" type="video/mp4">
        </video>
        <div class="footer-content">
            <div class="footer-logo">gotham.</div>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
            </div>
            <div class="footer-bottom">
                <div class="copyright">Copyright ¬© 2025 Wayne Enterprises. All rights reserved.</div>
                <div class="social-links">
                    <a href="https://x.com/Batman" aria-label="X">ùïè</a>
                    <a href="https://www.linkedin.com/in/batman-%E2%80%8E-74b104397/" aria-label="LinkedIn">in</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // API Base URL - automatically uses current domain
        const API_BASE = window.location.origin;
        
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatArea = document.getElementById('chatArea');
        const chatModal = document.getElementById('chatModal');
        const openChatBtn = document.getElementById('openChatBtn');
        const closeChatBtn = document.getElementById('closeChatBtn');
        const heroGothamBtn = document.getElementById('heroGothamBtn');
        const promptBtn = document.getElementById('promptBtn');
        const promptModal = document.getElementById('promptModal');
        const promptTextarea = document.getElementById('promptTextarea');
        const closePromptModal = document.getElementById('closePromptModal');
        const savePrompt = document.getElementById('savePrompt');
        const cancelPrompt = document.getElementById('cancelPrompt');

        // Load system prompt on startup
        loadSystemPrompt();

        async function loadSystemPrompt() {
            try {
                const response = await fetch(`${API_BASE}/api/prompt`);
                const data = await response.json();
                console.log('System prompt loaded');
            } catch (error) {
                console.error('Failed to load prompt:', error);
            }
        }

        // Chat modal controls
        openChatBtn.addEventListener('click', () => {
            chatModal.classList.add('active');
            userInput.focus();
        });

        heroGothamBtn.addEventListener('click', () => {
            chatModal.classList.add('active');
            userInput.focus();
        });

        closeChatBtn.addEventListener('click', () => {
            chatModal.classList.remove('active');
        });

        chatModal.addEventListener('click', (e) => {
            if (e.target === chatModal) {
                chatModal.classList.remove('active');
            }
        });

        // Prompt modal controls
        promptBtn.addEventListener('click', async () => {
            try {
                const response = await fetch(`${API_BASE}/api/prompt`);
                const data = await response.json();
                promptTextarea.value = data.prompt;
                promptModal.classList.add('active');
            } catch (error) {
                addError('Failed to load prompt');
            }
        });

        closePromptModal.addEventListener('click', () => {
            promptModal.classList.remove('active');
        });

        cancelPrompt.addEventListener('click', () => {
            promptModal.classList.remove('active');
        });

        savePrompt.addEventListener('click', async () => {
            const prompt = promptTextarea.value;
            
            try {
                const response = await fetch(`${API_BASE}/api/prompt`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                });
                
                const data = await response.json();
                promptModal.classList.remove('active');
                addMessage('System prompt updated', 'bot');
            } catch (error) {
                addError('Failed to save prompt');
            }
        });

        // Close prompt modal on outside click
        promptModal.addEventListener('click', (e) => {
            if (e.target === promptModal) {
                promptModal.classList.remove('active');
            }
        });

        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !sendBtn.disabled) {
                sendMessage();
            }
        });

        sendBtn.addEventListener('click', sendMessage);

        async function sendMessage() {
            const message = userInput.value.trim();

            if (!message) return;

            addMessage(message, 'user');
            userInput.value = '';
            sendBtn.disabled = true;
            userInput.disabled = true;

            const typingDiv = addTypingIndicator();

            try {
                const response = await fetch(`${API_BASE}/api/chat`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message })
                });

                typingDiv.remove();

                if (!response.ok) {
                    throw new Error(`Server Error: ${response.status}`);
                }

                const data = await response.json();
                const botMessage = data.choices[0].message.content;
                addMessage(botMessage, 'bot');

            } catch (error) {
                typingDiv.remove();
                addError(error.message);
            }

            sendBtn.disabled = false;
            userInput.disabled = false;
            userInput.focus();
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${sender}`;
            messageDiv.textContent = text;
            
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function addTypingIndicator() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message message-bot typing';
            messageDiv.textContent = 'Processing';
            
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
            
            return messageDiv;
        }

        function addError(text) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = text;
            chatArea.appendChild(errorDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }
    </script>
</body>
</html>